import{a as l,c as g,d as o,e as v}from"../../../../_chunks/chunk-P6IMBATB.js";import{a as m}from"../../../../_chunks/chunk-IQB4VCZN.js";import{c,f as h,i as w}from"../../../../_chunks/chunk-THKE7DQS.js";var e=h(w(),1);function y(i){var a=new d({element:"#LoginPanel"});i!=null&&i.activated&&(a.form.Username.value=i.activated,a.form.Password.element.getNode().focus())}c(y,"pageInit");var s=class s extends e.PropertyPanel{constructor(t){super(t);this.form=new l(this.idPrefix)}getFormKey(){return l.formKey}loginClick(){if(this.validateForm()){var t=this.getSaveEntity();(0,e.serviceCall)({url:(0,e.resolveUrl)("~/Account/Login"),request:t,onSuccess:()=>{this.redirectToReturnUrl()},onError:r=>{var n,u,f;if(((n=r==null?void 0:r.Error)==null?void 0:n.Code)==="RedirectUserTo"){window.location.href=r.Error.Arguments;return}if((f=(u=r==null?void 0:r.Error)==null?void 0:u.Message)!=null&&f.length){(0,e.notifyError)(r.Error.Message),this.form.Password.element.getNode().focus();return}e.ErrorHandling.showServiceError(r.Error)}})}}getReturnUrl(){var t=(0,e.parseQueryString)();return t.returnUrl||t.ReturnUrl}redirectToReturnUrl(){var t=this.getReturnUrl();if(t&&/^\//.test(t)){var r=window.location.hash;r!=null&&r!="#"&&(t+=r),window.location.href=t}else window.location.href=(0,e.resolveUrl)("~/")}renderContents(){let t=this.useIdPrefix(),r=m.Forms.Membership.Login;this.element.empty().append(o(g,{children:[o(v,{}),o("div",{class:"s-Panel p-4",children:[o("h5",{class:"text-center my-4",children:r.LoginToYourAccount}),o("form",{id:t.Form,action:"",children:[o("div",{id:t.PropertyGrid}),o("div",{class:"px-field",children:o("a",{class:"float-end text-decoration-none",href:(0,e.resolveUrl)("~/Account/ForgotPassword"),children:r.ForgotPassword})}),o("div",{class:"px-field",children:o("button",{id:t.LoginButton,type:"submit",class:"btn btn-primary my-3 w-100",onClick:n=>{n.preventDefault(),this.loginClick()},children:r.SignInButton})})]})]}),o("div",{class:"text-center mt-2",children:o("a",{class:"text-decoration-none",href:(0,e.resolveUrl)("~/Account/SignUp"),children:r.SignUpButton})})]}))}};c(s,"LoginPanel");var d=s;export{y as default};
//# sourceMappingURL=LoginPage.js.map
